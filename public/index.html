<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Insurance Quiz</title>
    <style>
        /* --- Your CSS (unchanged, as it was solid) --- */
        /* [Keep your existing CSS here â€“ no issues found] */
    </style>
</head>
<body>
    <div class="quiz-container">
        <!-- Progress bar -->
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <!-- Example Question with FIXED Back Button -->
        <div class="question-slide active" id="question-1" data-question="1">
            <div class="question-container">
                <h2 class="question-title">Are you?</h2>
            </div>
            <div class="options-container">
                <button class="option" data-value="Male">Male</button>
                <button class="option" data-value="Female">Female</button>
                <button class="option" data-value="Other">Other</button>
            </div>
        </div>

        <!-- Apply this everywhere: -->
        <!-- Replace ALL back buttons like this -->
        <div class="navigation">
            <button class="btn btn-back">Back</button>
        </div>

        <!-- Leave everything else the same, just ensure ALL back buttons use class ONLY -->
        <!-- For example in Question 2 -->
        <!--
        <div class="navigation">
            <button class="btn btn-back">Back</button>
        </div>
        -->

        <!-- Same for multi-selects -->
        <!-- 
        <div class="navigation">
            <button class="btn btn-back">Back</button>
            <button class="btn btn-next" id="next-multi-select">Next</button>
        </div>
        -->

        <!-- Keep rest of your questions, loading screen, lead form, OTP screen as-is -->
        <!-- Ensure your loading-container and otp-container inline styles remain if needed -->

        <!-- Security notice -->
        <div class="security-notice">
            Your Information Is 100% Secure And Safe
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const quizData = { answers: {}, userInfo: {} };
            let currentQuestion = 1;
            let totalQuestions = 15;

            const progressBar = document.getElementById('progress-bar');
            const questionSlides = document.querySelectorAll('.question-slide');

            function updateProgressBar() {
                const progress = (currentQuestion / totalQuestions) * 100;
                progressBar.style.width = progress + '%';
            }

            function showQuestion(number) {
                questionSlides.forEach(slide => slide.classList.remove('active'));
                document.getElementById(
                    number === 13 ? 'loading-screen' :
                    number === 14 ? 'lead-form' :
                    number === 15 ? 'otp-screen' :
                    'question-' + number
                ).classList.add('active');
                currentQuestion = number;
                updateProgressBar();
            }

            document.querySelectorAll('.option').forEach(button => {
                button.onclick = function() {
                    const questionId = this.closest('.question-slide').getAttribute('data-question');
                    const answer = this.getAttribute('data-value');
                    quizData.answers[questionId] = answer;

                    if ((questionId === '6' && answer === '65+') || 
                        (questionId === '8' && answer === 'Unemployed')) {
                        window.location.href = 'https://yourlandingpage.com/sorry';
                        return;
                    }

                    if (questionId === '2') {
                        showQuestion(answer === 'No' ? 6 : 3);
                    } else {
                        showQuestion(parseInt(questionId) + 1);
                    }
                };
            });

            document.querySelectorAll('.btn-back').forEach(button => {
                button.onclick = function() {
                    const questionId = parseInt(this.closest('.question-slide').getAttribute('data-question'));
                    if (questionId === 6 && quizData.answers[2] === 'No') {
                        showQuestion(2);
                    } else {
                        showQuestion(questionId - 1);
                    }
                };
            });

            document.querySelectorAll('#next-multi-select').forEach(button => {
                button.onclick = function() {
                    const questionId = this.closest('.question-slide').getAttribute('data-question');
                    const checkboxes = this.closest('.question-slide').querySelectorAll('input[type="checkbox"]:checked');
                    if (checkboxes.length === 0) {
                        alert('Please select at least one option');
                        return;
                    }
                    const selectedValues = Array.from(checkboxes).map(cb => cb.value);
                    quizData.answers[questionId] = selectedValues;
                    showQuestion(parseInt(questionId) + 1);
                };
            });

            document.getElementById('next-occupation').onclick = function() {
                const occupation = document.getElementById('occupation').value.trim();
                const errorElement = document.getElementById('occupation-error');
                if (occupation === '') {
                    errorElement.textContent = 'Please enter your occupation';
                    return;
                }
                errorElement.textContent = '';
                quizData.answers[12] = occupation;
                showQuestion(13);
                setTimeout(() => showQuestion(14), 3000);
            };

            document.querySelectorAll('.checkbox-option').forEach(option => {
                option.onclick = function(e) {
                    if (e.target.tagName !== 'INPUT') {
                        const checkbox = this.querySelector('input[type="checkbox"]');
                        checkbox.checked = !checkbox.checked;
                    }
                    this.classList.toggle('selected', this.querySelector('input[type="checkbox"]').checked);
                };
            });

            document.getElementById('submit-lead').onclick = function() {
                const firstName = document.getElementById('first-name').value.trim();
                const lastName = document.getElementById('last-name').value.trim();
                const email = document.getElementById('email').value.trim();
                const countryCode = document.getElementById('country-code').value;
                const phone = document.getElementById('phone').value.trim();

                let isValid = true;
                const errors = {
                    'first-name': firstName === '',
                    'last-name': lastName === '',
                    'email': email === '' || !isValidEmail(email),
                    'phone': phone === '' || !isValidPhone(phone)
                };

                for (let field in errors) {
                    document.getElementById(`${field}-error`).textContent = errors[field] ? `Please enter a valid ${field.replace('-', ' ')}` : '';
                    if (errors[field]) isValid = false;
                }

                if (!isValid) return;

                quizData.userInfo = { firstName, lastName, email, phone: countryCode + phone };
                showQuestion(15);
                startOtpTimer();
                console.log('Final data to submit:', quizData);
            };

            function isValidEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email.toLowerCase());
            }

            function isValidPhone(phone) {
                return phone.length >= 10 && /^[0-9]+$/.test(phone);
            }

            const otpInputs = document.querySelectorAll('.otp-input');
            otpInputs.forEach((input, index) => {
                input.addEventListener('input', function() {
                    if (this.value.length === 1 && index < otpInputs.length - 1) otpInputs[index + 1].focus();
                });
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value === '' && index > 0) otpInputs[index - 1].focus();
                });
            });

            function startOtpTimer() {
                let timeLeft = 30;
                const countdownEl = document.getElementById('countdown');
                const resendBtn = document.getElementById('resend-code');
                resendBtn.disabled = true;
                document.getElementById('resend-timer').style.display = 'block';
                const timer = setInterval(() => {
                    countdownEl.textContent = --timeLeft;
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        resendBtn.disabled = false;
                        document.getElementById('resend-timer').style.display = 'none';
                    }
                }, 1000);
            }

            document.getElementById('resend-code').addEventListener('click', function() {
                otpInputs.forEach(input => input.value = '');
                console.log('Resending OTP to', quizData.userInfo.phone);
                startOtpTimer();
            });

            document.getElementById('verify-otp').addEventListener('click', function() {
                const otpCode = Array.from(otpInputs).map(input => input.value).join('');
                if (otpCode.length < 4) {
                    document.getElementById('otp-error').textContent = 'Please enter the complete code';
                    return;
                }
                console.log('Final data submitted with OTP:', otpCode);
                window.location.href = "https://yourlandingpage.com/thank-you";
            });

            updateProgressBar();
        });
    </script>
</body>
</html>
